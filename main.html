<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Placeholder.dev - Search Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        /* Enhanced Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .floating-orb {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(20px);
            animation: float-smooth 15s infinite ease-in-out;
        }
        
        .orb-1 {
            width: 120px;
            height: 120px;
            top: 15%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .orb-2 {
            width: 200px;
            height: 200px;
            top: 50%;
            right: 15%;
            animation-delay: -5s;
        }
        
        .orb-3 {
            width: 90px;
            height: 90px;
            bottom: 25%;
            left: 25%;
            animation-delay: -10s;
        }
        
        .orb-4 {
            width: 150px;
            height: 150px;
            top: 25%;
            right: 35%;
            animation-delay: -7s;
        }
        
        .orb-5 {
            width: 80px;
            height: 80px;
            bottom: 15%;
            right: 20%;
            animation-delay: -12s;
        }
        
        @keyframes float-smooth {
            0%, 100% { 
                transform: translate(0, 0) scale(1) rotate(0deg);
                opacity: 0.6;
            }
            25% { 
                transform: translate(20px, -25px) scale(1.1) rotate(90deg);
                opacity: 0.8;
            }
            50% { 
                transform: translate(-15px, 15px) scale(0.9) rotate(180deg);
                opacity: 0.4;
            }
            75% { 
                transform: translate(25px, 20px) scale(1.05) rotate(270deg);
                opacity: 0.7;
            }
        }
        
        /* Glass Effects */
        .glass {
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .glass-dark {
            background: rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
        }
        
        /* Enhanced Button Animations */
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 25px 50px rgba(102, 126, 234, 0.5);
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-primary:active {
            transform: translateY(-1px) scale(0.98);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(255, 255, 255, 0.1);
        }
        
        /* Enhanced Search Input */
        .search-input {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .search-input:focus {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 0 6px rgba(102, 126, 234, 0.2), 0 15px 35px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        /* Logo Animation */
        .logo-container {
            animation: logo-pulse 4s ease-in-out infinite;
        }
        
        @keyframes logo-pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 0 0 20px rgba(255, 255, 255, 0);
            }
        }
        
        /* Enhanced Bookmark Animations */
        .bookmark-item {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .bookmark-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .bookmark-item:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .bookmark-item:hover::before {
            opacity: 1;
        }
        
        .bookmark-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 1.5rem;
            max-height: 280px;
            overflow-y: auto;
            padding: 1rem;
        }
        
        .bookmark-grid::-webkit-scrollbar {
            width: 8px;
        }
        
        .bookmark-grid::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        .bookmark-grid::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }
        
        .bookmark-grid::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        /* Enhanced Fly-in Animation */
        .bookmark-fly-in {
            animation: enhanced-fly-in 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes enhanced-fly-in {
            0% {
                transform: scale(0) rotate(180deg) translateY(100px);
                opacity: 0;
            }
            60% {
                transform: scale(1.15) rotate(10deg) translateY(-10px);
                opacity: 0.8;
            }
            80% {
                transform: scale(0.95) rotate(-5deg) translateY(5px);
                opacity: 0.9;
            }
            100% {
                transform: scale(1) rotate(0deg) translateY(0);
                opacity: 1;
            }
        }
        
        /* Tab Animations */
        .tab-button {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .tab-button::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .tab-button.active::after {
            width: 100%;
        }
        
        .tab-button.active {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }
        
        /* Context Menu Enhancement */
        .context-menu {
            position: fixed;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 12px;
            z-index: 1000;
            min-width: 200px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
            animation: context-menu-appear 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes context-menu-appear {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(-10px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .context-menu-item {
            padding: 14px 18px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 14px;
            color: white;
            font-size: 14px;
        }
        
        .context-menu-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(4px);
        }
        
        /* Modal Enhancements */
        .modal-backdrop {
            backdrop-filter: blur(12px);
            background: rgba(0, 0, 0, 0.4);
            animation: modal-backdrop-appear 0.3s ease;
        }
        
        @keyframes modal-backdrop-appear {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        
        .modal-content {
            animation: modal-slide-up 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes modal-slide-up {
            0% {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Stats Card Animations */
        .stats-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 24px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .stats-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s;
        }
        
        .stats-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .stats-card:hover::before {
            left: 100%;
        }
        
        /* Fade-in animations for content */
        .fade-in-up {
            animation: fade-in-up 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            opacity: 0;
            transform: translateY(30px);
        }
        
        @keyframes fade-in-up {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        .delay-400 { animation-delay: 0.4s; }
        
        /* Sort dropdown enhancement */
        .sort-dropdown {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
            animation: dropdown-appear 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes dropdown-appear {
            0% {
                opacity: 0;
                transform: translateY(-10px) scale(0.95);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
    </style>
</head>
<body class="text-white">
    <!-- Enhanced Animated Background -->
    <div class="bg-animation">
        <div class="floating-orb orb-1"></div>
        <div class="floating-orb orb-2"></div>
        <div class="floating-orb orb-3"></div>
        <div class="floating-orb orb-4"></div>
        <div class="floating-orb orb-5"></div>
    </div>

    <!-- Main Dashboard -->
    <div class="h-screen flex flex-col">
        <!-- Header -->
        <header class="flex justify-between items-center p-6 fade-in-up">
            <div class="flex items-center gap-4">
                <div class="w-14 h-14 rounded-full glass flex items-center justify-center logo-container">
                    <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                </div>
                <h1 class="text-3xl font-bold bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent">
                    Placeholder.dev
                </h1>
            </div>
            
            <!-- Tab Navigation -->
            <nav class="flex gap-3">
                <button onclick="switchTab('dashboard')" class="tab-button active px-6 py-3 rounded-xl btn-secondary text-sm font-medium" id="tab-dashboard">
                    Dashboard
                </button>
                <button onclick="switchTab('analytics')" class="tab-button px-6 py-3 rounded-xl btn-secondary text-sm font-medium" id="tab-analytics">
                    Analytics
                </button>
                <button onclick="switchTab('labs')" class="tab-button px-6 py-3 rounded-xl btn-secondary text-sm font-medium" id="tab-labs">
                    Labs
                </button>
            </nav>
        </header>

        <!-- Main Content Area -->
        <div class="flex-1 px-6 pb-6">
            <!-- Dashboard Tab -->
            <div id="dashboard-content" class="tab-content h-full flex flex-col">
                <!-- Central Search Section -->
                <div class="flex-1 flex flex-col justify-center items-center max-w-4xl mx-auto w-full fade-in-up delay-100">
                    <div class="text-center mb-12">
                        <h2 class="text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white via-purple-200 to-pink-200 bg-clip-text text-transparent">
                            Search Anything
                        </h2>
                        <p class="text-xl text-white/80 max-w-2xl mx-auto">
                            Your gateway to the web. Search, bookmark, and navigate with style.
                        </p>
                    </div>
                    
                    <!-- Enhanced Search Bar -->
                    <div class="w-full max-w-3xl mb-8">
                        <div class="relative">
                            <input 
                                type="text" 
                                id="searchInput" 
                                placeholder="Enter URL or search the web..."
                                class="w-full h-20 px-8 pr-40 text-xl rounded-3xl search-input text-white placeholder-white/60 outline-none font-medium"
                            >
                            <button 
                                onclick="handleSearch()" 
                                class="absolute right-3 top-3 h-14 px-10 btn-primary rounded-2xl text-white font-semibold flex items-center gap-3 text-lg"
                            >
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                                Search
                            </button>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="flex flex-wrap gap-4 mb-8">
                        <button onclick="addBookmark()" class="btn-secondary px-8 py-4 rounded-2xl text-white font-medium flex items-center gap-3 text-lg">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                            Add Bookmark
                        </button>
                        <button onclick="showRandomBookmark()" class="btn-secondary px-8 py-4 rounded-2xl text-white font-medium flex items-center gap-3 text-lg">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                            </svg>
                            Random Site
                        </button>
                    </div>
                </div>

                <!-- Bookmarks Section -->
                <div class="glass rounded-3xl p-8 fade-in-up delay-200">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex items-center gap-4">
                            <h3 class="text-2xl font-semibold">Quick Access</h3>
                            <span id="bookmarkCount" class="px-3 py-1 rounded-full bg-white/20 text-sm font-medium">0 bookmarks</span>
                        </div>
                        <div class="flex gap-3">
                            <div class="relative">
                                <button onclick="toggleSortDropdown()" class="btn-secondary px-6 py-3 rounded-xl text-sm flex items-center gap-2">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"/>
                                    </svg>
                                    Sort
                                </button>
                                <div id="sortDropdown" class="absolute right-0 top-14 sort-dropdown p-3 hidden z-50 min-w-48">
                                    <button onclick="sortBookmarks('mostVisited')" class="context-menu-item w-full text-left">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                                        </svg>
                                        Most Visited
                                    </button>
                                    <button onclick="sortBookmarks('lastVisited')" class="context-menu-item w-full text-left">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        Last Visited
                                    </button>
                                    <button onclick="sortBookmarks('alphabetical')" class="context-menu-item w-full text-left">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"/>
                                        </svg>
                                        Alphabetical
                                    </button>
                                    <button onclick="sortBookmarks('newest')" class="context-menu-item w-full text-left">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                                        </svg>
                                        Newest First
                                    </button>
                                </div>
                            </div>
                            <button onclick="clearAllBookmarks()" class="btn-secondary px-6 py-3 rounded-xl text-sm text-red-300 hover:text-red-200">
                                Clear All
                            </button>
                        </div>
                    </div>
                    
                    <div id="bookmarkGrid" class="bookmark-grid">
                        <!-- Bookmarks will be rendered here -->
                    </div>
                    
                    <div id="emptyBookmarks" class="text-center py-16 text-white/60 hidden">
                        <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-white/10 flex items-center justify-center">
                            <svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-semibold mb-2">No bookmarks yet</h3>
                        <p class="text-lg">Add some to get started!</p>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics-content" class="tab-content h-full hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 h-full">
                    <!-- Usage Chart -->
                    <div class="glass rounded-3xl p-8 fade-in-up">
                        <h2 class="text-2xl font-semibold mb-6">Usage Analytics</h2>
                        <div class="h-64">
                            <canvas id="usageChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Top Bookmarks -->
                    <div class="glass rounded-3xl p-8 fade-in-up delay-100">
                        <h2 class="text-2xl font-semibold mb-6">Top Bookmarks</h2>
                        <div id="topBookmarksList" class="space-y-4 max-h-64 overflow-y-auto">
                            <!-- Top bookmarks will be rendered here -->
                        </div>
                    </div>
                    
                    <!-- Stats Grid -->
                    <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-4 gap-6 fade-in-up delay-200">
                        <div class="stats-card">
                            <h3 class="text-sm text-white/70 mb-3 font-medium">Total Clicks</h3>
                            <p id="totalClicks" class="text-3xl font-bold">0</p>
                            <div class="mt-2 text-xs text-white/50">All time</div>
                        </div>
                        <div class="stats-card">
                            <h3 class="text-sm text-white/70 mb-3 font-medium">This Week</h3>
                            <p id="weekClicks" class="text-3xl font-bold">0</p>
                            <div class="mt-2 text-xs text-white/50">Last 7 days</div>
                        </div>
                        <div class="stats-card">
                            <h3 class="text-sm text-white/70 mb-3 font-medium">Average Daily</h3>
                            <p id="avgDaily" class="text-3xl font-bold">0</p>
                            <div class="mt-2 text-xs text-white/50">Per day</div>
                        </div>
                        <div class="stats-card">
                            <h3 class="text-sm text-white/70 mb-3 font-medium">Most Active Day</h3>
                            <p id="mostActiveDay" class="text-3xl font-bold">-</p>
                            <div class="mt-2 text-xs text-white/50">This week</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Labs Tab -->
            <div id="labs-content" class="tab-content h-full hidden">
                <div class="glass rounded-3xl p-8 h-full fade-in-up">
                    <h2 class="text-2xl font-semibold mb-8">Experimental Features</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- AI Bookmarks -->
                        <div class="stats-card">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold">AI Smart Bookmarks</h3>
                                    <p class="text-sm text-white/70">Auto-categorize and suggest bookmarks</p>
                                </div>
                            </div>
                            <label class="flex items-center gap-4 cursor-pointer">
                                <input type="checkbox" id="aiBookmarks" class="w-5 h-5 rounded accent-purple-500">
                                <span class="text-sm font-medium">Enable AI suggestions</span>
                            </label>
                        </div>

                        <!-- Theme Variants -->
                        <div class="stats-card">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold">Theme Variants</h3>
                                    <p class="text-sm text-white/70">Experimental color schemes</p>
                                </div>
                            </div>
                            <select class="w-full p-3 rounded-xl bg-white/10 border border-white/20 text-white outline-none">
                                <option value="default">Default Burple</option>
                                <option value="ocean">Ocean Blue</option>
                                <option value="sunset">Sunset Orange</option>
                                <option value="forest">Forest Green</option>
                            </select>
                        </div>

                        <!-- Voice Commands -->
                        <div class="stats-card">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-12 h-12 rounded-xl bg-gradient-to-r from-green-500 to-teal-500 flex items-center justify-center">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold">Voice Commands</h3>
                                    <p class="text-sm text-white/70">Search and navigate by voice</p>
                                </div>
                            </div>
                            <button onclick="toggleVoiceCommands()" class="w-full btn-secondary py-3 rounded-xl text-sm font-medium">
                                Enable Voice Control
                            </button>
                        </div>

                        <!-- Gesture Controls -->
                        <div class="stats-card">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-12 h-12 rounded-xl bg-gradient-to-r from-red-500 to-pink-500 flex items-center justify-center">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M9 11H7v3h2v-3zm4 0h-2v3h2v-3zm4 0h-2v3h2v-3zm2-7h-1V2h-2v2H8V2H6v2H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold">Gesture Navigation</h3>
                                    <p class="text-sm text-white/70">Swipe gestures for quick actions</p>
                                </div>
                            </div>
                            <label class="flex items-center gap-4 cursor-pointer">
                                <input type="checkbox" id="gestureControls" class="w-5 h-5 rounded accent-purple-500">
                                <span class="text-sm font-medium">Enable gestures</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Context Menu -->
    <div id="contextMenu" class="context-menu hidden">
        <div class="context-menu-item" onclick="renameBookmark()">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
            </svg>
            Rename
        </div>
        <div class="context-menu-item" onclick="copyBookmarkLink()">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
            </svg>
            Copy Link
        </div>
        <div class="context-menu-item" onclick="archiveBookmark()">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8l6 6 6-6"/>
            </svg>
            Archive
        </div>
        <div class="context-menu-item text-red-400" onclick="deleteBookmarkFromContext()">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
            </svg>
            Delete
        </div>
    </div>

    <!-- Enhanced Add Bookmark Modal -->
    <div id="bookmarkModal" class="fixed inset-0 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="glass rounded-3xl p-10 w-full max-w-lg modal-content">
            <div class="flex justify-between items-center mb-8">
                <h3 class="text-2xl font-semibold text-white">Add Bookmark</h3>
                <button onclick="closeModal()" class="text-white/60 hover:text-white transition-colors p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="space-y-6">
                <div>
                    <label class="block text-white/80 mb-3 font-medium">Bookmark Name</label>
                    <input 
                        type="text" 
                        id="bookmarkName" 
                        placeholder="Enter bookmark name..."
                        class="w-full h-14 px-6 rounded-2xl search-input text-white placeholder-white/60 outline-none"
                    >
                </div>
                <div>
                    <label class="block text-white/80 mb-3 font-medium">URL</label>
                    <input 
                        type="text" 
                        id="bookmarkUrl" 
                        placeholder="Enter URL..."
                        class="w-full h-14 px-6 rounded-2xl search-input text-white placeholder-white/60 outline-none"
                    >
                </div>
                <div class="flex gap-4 pt-6">
                    <button onclick="saveBookmark()" class="flex-1 btn-primary h-14 rounded-2xl text-white font-semibold text-lg">
                        Save Bookmark
                    </button>
                    <button onclick="closeModal()" class="flex-1 btn-secondary h-14 rounded-2xl text-white font-medium text-lg">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
        let analytics = JSON.parse(localStorage.getItem('analytics')) || {};
        let currentTab = 'dashboard';
        let contextMenuTarget = null;
        let sortDropdownOpen = false;
        let usageChart = null;

        // Initialize analytics structure
        if (!analytics.clicks) analytics.clicks = {};
        if (!analytics.daily) analytics.daily = {};

        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
                content.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected tab content
            const targetContent = document.getElementById(tabName + '-content');
            targetContent.classList.remove('hidden');
            targetContent.classList.add('active');
            document.getElementById('tab-' + tabName).classList.add('active');
            
            currentTab = tabName;
            
            if (tabName === 'analytics') {
                setTimeout(() => {
                    renderAnalytics();
                }, 100);
            }
        }

function handleSearch(event) {
    const input = document.getElementById('searchInput').value.trim();
    if (!input) return;

    let url;
    if (isValidURL(input)) {
        url = input.startsWith('http') ? input : 'https://' + input;
    } else {
        url = 'https://www.google.com/search?q=' + encodeURIComponent(input);
    }

    // Use old-style iframe + window fallback for embeds
    const iframe = document.createElement('iframe');
    iframe.src = 'loading.html';
    iframe.style.position = 'fixed';
    iframe.style.top = '0';
    iframe.style.left = '0';
    iframe.style.width = '100%';
    iframe.style.height = '100%';
    iframe.style.border = 'none';
    document.body.appendChild(iframe);

    const blobbypass = window.open('loading.html');
    setTimeout(() => {
        if (!blobbypass || blobbypass.closed || typeof blobbypass.closed === "undefined") {
            window.location.href = url;
        } else {
            blobbypass.location.href = url;
            setTimeout(() => {
                document.body.removeChild(iframe);
            }, 500);
        }
    }, 1000);

    document.getElementById('searchInput').value = '';
    trackAnalytics('search', url);
    showToast('Opening ' + (isValidURL(input) ? 'website' : 'search results') + '...');
}

        function isValidURL(str) {
            const pattern = /^(https?:\/\/)?([\w\d-]+\.)+[\w]{2,}(\/.*)?$/;
            return pattern.test(str);
        }

        function addBookmark() {
            const input = document.getElementById('searchInput').value.trim();
            document.getElementById('bookmarkUrl').value = input;
            document.getElementById('bookmarkModal').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('bookmarkName').focus();
            }, 100);
        }

        function saveBookmark() {
            const name = document.getElementById('bookmarkName').value.trim();
            const url = document.getElementById('bookmarkUrl').value.trim();

            if (!name || !url) {
                showToast('Please fill in both fields', 'error');
                return;
            }

            let finalUrl;
            if (isValidURL(url)) {
                finalUrl = url.startsWith('http') ? url : 'https://' + url;
            } else {
                finalUrl = 'https://www.google.com/search?q=' + encodeURIComponent(url);
            }

            const bookmark = {
                id: Date.now(),
                name: name,
                url: finalUrl,
                favicon: getFaviconURL(finalUrl),
                created: new Date().toISOString(),
                clicks: 0,
                lastVisited: null
            };

            bookmarks.push(bookmark);
            analytics.clicks[bookmark.id] = 0;

            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
            localStorage.setItem('analytics', JSON.stringify(analytics));
            
            renderBookmarks();
            updateBookmarkCount();
            closeModal();
            
            showToast('Bookmark added successfully!');
            
            // Add fly-in animation to the new bookmark
            setTimeout(() => {
                const newBookmarkElement = document.querySelector(`[data-bookmark-id="${bookmark.id}"]`);
                if (newBookmarkElement) {
                    newBookmarkElement.classList.add('bookmark-fly-in');
                }
            }, 100);
        }

        function closeModal() {
            document.getElementById('bookmarkModal').classList.add('hidden');
            document.getElementById('bookmarkName').value = '';
            document.getElementById('bookmarkUrl').value = '';
        }

        function renderBookmarks() {
            const grid = document.getElementById('bookmarkGrid');
            const empty = document.getElementById('emptyBookmarks');

            if (bookmarks.filter(b => !b.archived).length === 0) {
                grid.innerHTML = '';
                empty.classList.remove('hidden');
                return;
            }

            empty.classList.add('hidden');
            const activeBookmarks = bookmarks.filter(b => !b.archived);
            
            grid.innerHTML = activeBookmarks.map(bookmark => `
                <div class="bookmark-item glass rounded-2xl p-6 text-center group relative" 
                     data-bookmark-id="${bookmark.id}"
                     oncontextmenu="showContextMenu(event, ${bookmark.id}); return false;">
                    <div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-white/10 flex items-center justify-center">
                        <img src="${bookmark.favicon}" alt="Favicon" class="w-10 h-10 rounded-lg" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <svg class="w-8 h-8 text-white/60 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
                        </svg>
                    </div>
                    <h3 class="text-white font-semibold text-base mb-2 truncate" title="${bookmark.name}">${bookmark.name}</h3>
                    <p class="text-white/50 text-sm mb-4">${bookmark.clicks || 0} clicks</p>
                    <button onclick="openBookmark('${bookmark.url}', ${bookmark.id})" class="w-full btn-secondary py-3 rounded-xl text-sm text-white/80 hover:text-white font-medium">
                        Open
                    </button>
                </div>
            `).join('');
        }

        function openBookmark(url, bookmarkId) {
            window.open(url, '_blank');
            
            // Update analytics
            const bookmark = bookmarks.find(b => b.id === bookmarkId);
            if (bookmark) {
                bookmark.clicks = (bookmark.clicks || 0) + 1;
                bookmark.lastVisited = new Date().toISOString();
                analytics.clicks[bookmarkId] = bookmark.clicks;
                
                // Track daily analytics
                const today = new Date().toDateString();
                if (!analytics.daily[today]) analytics.daily[today] = 0;
                analytics.daily[today]++;
                
                localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
                localStorage.setItem('analytics', JSON.stringify(analytics));
                
                renderBookmarks();
                updateBookmarkCount();
                
                showToast('Opening ' + bookmark.name + '...');
            }
        }

        function showContextMenu(event, bookmarkId) {
            event.preventDefault();
            const contextMenu = document.getElementById('contextMenu');
            contextMenuTarget = bookmarkId;
            
            contextMenu.style.left = event.pageX + 'px';
            contextMenu.style.top = event.pageY + 'px';
            contextMenu.classList.remove('hidden');
        }

        function hideContextMenu() {
            document.getElementById('contextMenu').classList.add('hidden');
            contextMenuTarget = null;
        }

        function renameBookmark() {
            if (!contextMenuTarget) return;
            
            const bookmark = bookmarks.find(b => b.id === contextMenuTarget);
            if (bookmark) {
                const newName = prompt('Enter new name:', bookmark.name);
                if (newName && newName.trim()) {
                    bookmark.name = newName.trim();
                    localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
                    renderBookmarks();
                    showToast('Bookmark renamed successfully!');
                }
            }
            hideContextMenu();
        }

        function copyBookmarkLink() {
            if (!contextMenuTarget) return;
            
            const bookmark = bookmarks.find(b => b.id === contextMenuTarget);
            if (bookmark) {
                navigator.clipboard.writeText(bookmark.url).then(() => {
                    showToast('Link copied to clipboard!');
                });
            }
            hideContextMenu();
        }

        function archiveBookmark() {
            if (!contextMenuTarget) return;
            
            const bookmark = bookmarks.find(b => b.id === contextMenuTarget);
            if (bookmark) {
                bookmark.archived = true;
                localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
                renderBookmarks();
                updateBookmarkCount();
                showToast('Bookmark archived');
            }
            hideContextMenu();
        }

        function deleteBookmarkFromContext() {
            if (!contextMenuTarget) return;
            
            if (confirm('Are you sure you want to delete this bookmark?')) {
                bookmarks = bookmarks.filter(b => b.id !== contextMenuTarget);
                delete analytics.clicks[contextMenuTarget];
                localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
                localStorage.setItem('analytics', JSON.stringify(analytics));
                renderBookmarks();
                updateBookmarkCount();
                showToast('Bookmark deleted');
            }
            hideContextMenu();
        }

        function toggleSortDropdown() {
            const dropdown = document.getElementById('sortDropdown');
            sortDropdownOpen = !sortDropdownOpen;
            
            if (sortDropdownOpen) {
                dropdown.classList.remove('hidden');
            } else {
                dropdown.classList.add('hidden');
            }
        }

        function sortBookmarks(criteria) {
            switch (criteria) {
                case 'mostVisited':
                    bookmarks.sort((a, b) => (b.clicks || 0) - (a.clicks || 0));
                    break;
                case 'lastVisited':
                    bookmarks.sort((a, b) => {
                        const aDate = a.lastVisited ? new Date(a.lastVisited) : new Date(0);
                        const bDate = b.lastVisited ? new Date(b.lastVisited) : new Date(0);
                        return bDate - aDate;
                    });
                    break;
                case 'alphabetical':
                    bookmarks.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'newest':
                    bookmarks.sort((a, b) => new Date(b.created) - new Date(a.created));
                    break;
            }
            
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
            renderBookmarks();
            toggleSortDropdown();
            showToast('Bookmarks sorted by ' + criteria.replace(/([A-Z])/g, ' $1').toLowerCase());
        }

        function updateBookmarkCount() {
            const count = bookmarks.filter(b => !b.archived).length;
            document.getElementById('bookmarkCount').textContent = `${count} bookmark${count !== 1 ? 's' : ''}`;
        }

        function showRandomBookmark() {
            const activeBookmarks = bookmarks.filter(b => !b.archived);
            if (activeBookmarks.length === 0) {
                showToast('No bookmarks available', 'error');
                return;
            }
            
            const randomBookmark = activeBookmarks[Math.floor(Math.random() * activeBookmarks.length)];
            openBookmark(randomBookmark.url, randomBookmark.id);
        }

        function clearAllBookmarks() {
            if (confirm('Are you sure you want to clear all bookmarks? This cannot be undone.')) {
                bookmarks = [];
                analytics.clicks = {};
                localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
                localStorage.setItem('analytics', JSON.stringify(analytics));
                renderBookmarks();
                updateBookmarkCount();
                showToast('All bookmarks cleared');
            }
        }

        function renderAnalytics() {
            // Update analytics stats
            const totalClicks = Object.values(analytics.clicks).reduce((sum, clicks) => sum + clicks, 0);
            const weekClicks = getWeekClicks();
            const avgDaily = Math.round(totalClicks / Math.max(Object.keys(analytics.daily).length, 1));
            const mostActiveDay = getMostActiveDay();
            
            document.getElementById('totalClicks').textContent = totalClicks;
            document.getElementById('weekClicks').textContent = weekClicks;
            document.getElementById('avgDaily').textContent = avgDaily;
            document.getElementById('mostActiveDay').textContent = mostActiveDay;
            
            // Render usage chart
            renderUsageChart();
            
            // Render top bookmarks
            renderTopBookmarks();
        }

        function renderUsageChart() {
            const ctx = document.getElementById('usageChart').getContext('2d');
            
            if (usageChart) {
                usageChart.destroy();
            }
            
            const last7Days = getLast7Days();
            const data = last7Days.map(day => analytics.daily[day] || 0);
            
            usageChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: last7Days.map(day => new Date(day).toLocaleDateString('en-US', { weekday: 'short' })),
                    datasets: [{
                        label: 'Daily Clicks',
                        data: data,
                        borderColor: 'rgba(102, 126, 234, 1)',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: 'rgba(102, 126, 234, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: 'white',
                                font: {
                                    size: 14
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        y: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        function renderTopBookmarks() {
            const topBookmarks = bookmarks
                .filter(b => !b.archived)
                .sort((a, b) => (b.clicks || 0) - (a.clicks || 0))
                .slice(0, 5);
            
            const container = document.getElementById('topBookmarksList');
            
            if (topBookmarks.length === 0) {
                container.innerHTML = '<div class="text-center text-white/60 py-8">No bookmark data yet</div>';
                return;
            }
            
            container.innerHTML = topBookmarks.map((bookmark, index) => `
                <div class="flex items-center gap-4 p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-colors">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm">
                        ${index + 1}
                    </div>
                    <img src="${bookmark.favicon}" alt="Favicon" class="w-10 h-10 rounded-lg" onerror="this.style.display='none'">
                    <div class="flex-1 min-w-0">
                        <h4 class="font-semibold text-white truncate">${bookmark.name}</h4>
                        <p class="text-sm text-white/60">${bookmark.clicks || 0} clicks</p>
                    </div>
                    <button onclick="openBookmark('${bookmark.url}', ${bookmark.id})" class="btn-secondary px-4 py-2 rounded-lg text-xs">
                        Open
                    </button>
                </div>
            `).join('');
        }

        function getLast7Days() {
            const days = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                days.push(date.toDateString());
            }
            return days;
        }

        function getWeekClicks() {
            const last7Days = getLast7Days();
            return last7Days.reduce((sum, day) => sum + (analytics.daily[day] || 0), 0);
        }

        function getMostActiveDay() {
            const days = Object.entries(analytics.daily);
            if (days.length === 0) return '-';
            
            const mostActive = days.reduce((max, [day, clicks]) => 
                clicks > max[1] ? [day, clicks] : max, 
                ['', 0]
            );
            
            return new Date(mostActive[0]).toLocaleDateString('en-US', { weekday: 'short' });
        }

        function trackAnalytics(type, data) {
            const today = new Date().toDateString();
            if (!analytics.daily[today]) analytics.daily[today] = 0;
            analytics.daily[today]++;
            localStorage.setItem('analytics', JSON.stringify(analytics));
        }

        function getFaviconURL(url) {
            try {
                const domain = new URL(url).hostname;
                return `https://www.google.com/s2/favicons?sz=64&domain=${domain}`;
            } catch {
                return '/placeholder.svg?height=32&width=32';
            }
        }

        function toggleVoiceCommands() {
            showToast('Voice commands feature coming soon!');
        }

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `fixed top-6 right-6 glass rounded-2xl p-4 text-white z-50 max-w-sm ${type === 'error' ? 'border-red-400' : 'border-green-400'}`;
            toast.innerHTML = `
                <div class="flex items-center gap-3">
                    <svg class="w-5 h-5 ${type === 'error' ? 'text-red-400' : 'text-green-400'}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        ${type === 'error' 
                            ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>'
                            : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>'
                        }
                    </svg>
                    <span class="font-medium">${message}</span>
                </div>
            `;
            
            toast.style.animation = 'modal-slide-up 0.3s ease';
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'fade-out 0.3s ease forwards';
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });

        document.getElementById('bookmarkName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('bookmarkUrl').focus();
            }
        });

        document.getElementById('bookmarkUrl').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                saveBookmark();
            }
        });

        // Close dropdowns and context menus on outside click
        document.addEventListener('click', function(e) {
            if (!e.target.closest('#sortDropdown') && !e.target.closest('button[onclick="toggleSortDropdown()"]')) {
                document.getElementById('sortDropdown').classList.add('hidden');
                sortDropdownOpen = false;
            }
            
            if (!e.target.closest('#contextMenu')) {
                hideContextMenu();
            }
        });

        // Close modal on outside click
        document.getElementById('bookmarkModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Add CSS for fade-out animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fade-out {
                0% { opacity: 1; transform: translateY(0); }
                100% { opacity: 0; transform: translateY(-20px); }
            }
        `;
        document.head.appendChild(style);

        // Initialize
        renderBookmarks();
        updateBookmarkCount();
    </script>
</body>
</html>
